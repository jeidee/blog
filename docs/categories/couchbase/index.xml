<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Couchbase on Erlang &amp; Go</title>
    <link>http://jeidee.github.io/categories/couchbase/</link>
    <description>Recent content in Couchbase on Erlang &amp; Go</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 25 Jan 2017 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="http://jeidee.github.io/categories/couchbase/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>couchbase cberl에 lcb_cntl 함수 추가</title>
      <link>http://jeidee.github.io/2017/01/25/couchbase-cberlec9790-lcb_cntl-ed95a8ec8898-ecb694eab080/</link>
      <pubDate>Wed, 25 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>http://jeidee.github.io/2017/01/25/couchbase-cberlec9790-lcb_cntl-ed95a8ec8898-ecb694eab080/</guid>
      <description>cberl에 libcouchbase의 옵션을 설정하거나 조회할 수 있는 lcb_cntl 함수를 추가해 보자.
새로운 함수 추가를 위해 코맨드 상수를 추가해 준다.
cberl_nif.h를 열어 다음행을 추가해 준다.
#define CMD_CNTL 8  새로운 코맨드에 콜백함수를 등록해 주기 위해서 cberl_nif.c소스의 NIF(cberl_nif_new) 함수에 다음행을 추가해 준다.
https://gist.github.com/jeidee/86967c348f64cee9b37c6bf41c207606
cntl 함수의 매개변수를 위한 구조체와 함수선언문을 cb.h에 다음과 같이 추가한다.
https://gist.github.com/jeidee/430f7cea10bc95099cafb79e71407f42
cntl 함수 정의부를 cb.c에 다음과 같이 작성한다.
https://gist.github.com/jeidee/07acab77aad96f32b4f79110ae202209
이제 erlang 소스를 수정해 보자.
cntl 함수가 erlang에서 호출될 수 있도록 cberl.</description>
    </item>
    
    <item>
      <title>couchbase cberl의IO Plugin을 libevent로 변경</title>
      <link>http://jeidee.github.io/2017/01/25/couchbase-cberlec9d98io-pluginec9d84-libeventeba19c-ebb380eab2bd/</link>
      <pubDate>Wed, 25 Jan 2017 00:00:00 +0000</pubDate>
      
      <guid>http://jeidee.github.io/2017/01/25/couchbase-cberlec9d98io-pluginec9d84-libeventeba19c-ebb380eab2bd/</guid>
      <description>cberl에는 io plugin이 default로 설정되어 있는데 이럴 경우 select를 사용한다. 동시에 열 수 있는 소켓수는 1024로 제한되어 있어, 그 이상을 처리하기 위해서는 libevent로 수정해야 한다.
그렇지 않을 경우 cberl의 view(http)를 사용할 경우 일정한 요청(동시에 열린 소켓수가 1024를 초과하는 시점) 이상일 경우 간헐적으로 unknown error 45(0x2d)를 반환한다.
실제 libcouchbase의 로그를 cntl함수를 사용해 erlang application process에 attach된 상태에서 stderr에 출력되는 로그를 확인해 보면 다음과 같은 오류가 출력되는 것을 확인할 수 있다.
(cberl:cntl 함수를 사용하려면 이전 포스트를 참고해서 cberl 소스를 수정해야 한다.</description>
    </item>
    
    <item>
      <title>couchbase cberl 사용해서 view 조회시 주의사항</title>
      <link>http://jeidee.github.io/2016/01/15/couchbase-cberl-ec82acec9aa9ed95b4ec849c-view-eca1b0ed9a8cec8b9c-eca3bcec9d98ec82aced95ad/</link>
      <pubDate>Fri, 15 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://jeidee.github.io/2016/01/15/couchbase-cberl-ec82acec9aa9ed95b4ec849c-view-eca1b0ed9a8cec8b9c-eca3bcec9d98ec82aced95ad/</guid>
      <description>couchbase의 view 조회시 데이터의 최신 본을 얻지 못할 수도 있다.
이러한 이유는 속도의 향상을 위해 stale옵션의 기본값이 true로 설정되어 있어서 그런데, 명시적으로 stale옵션을 false로 지정해야 최신 데이터가 적용된 view를 구할 수 있다.
cberl:view()함수를 사용할 때, stale옵션을 false로 지정하는 방법은 다음과 같다.
https://gist.github.com/jeidee/79e08693d3c6be338e31
Args에 {stale, false}를 추가하면 된다.</description>
    </item>
    
    <item>
      <title>couchbase 도큐먼트 백업</title>
      <link>http://jeidee.github.io/2016/01/06/couchbase-eb8f84ed8190eba8bced8ab8-ebb0b1ec9785/</link>
      <pubDate>Wed, 06 Jan 2016 00:00:00 +0000</pubDate>
      
      <guid>http://jeidee.github.io/2016/01/06/couchbase-eb8f84ed8190eba8bced8ab8-ebb0b1ec9785/</guid>
      <description> cbbackup http://[host]:8091 [backup-location] -x design\_doc\_only=1 -b [bucket-name]   출처  </description>
    </item>
    
    <item>
      <title>ejabberd couchbase 사용하기</title>
      <link>http://jeidee.github.io/2015/12/30/ejabberd-couchbase-ec82acec9aa9ed9598eab8b0/</link>
      <pubDate>Wed, 30 Dec 2015 00:00:00 +0000</pubDate>
      
      <guid>http://jeidee.github.io/2015/12/30/ejabberd-couchbase-ec82acec9aa9ed9598eab8b0/</guid>
      <description>mongodb와 마찬가지로 couchbase역시 ejabberd에서 공식 지원하지 않는다. erlang driver도 커뮤니티에서 만든 driver만 제공하므로 사용상 주의할 필요가 있다.
couchbase의 erlang driver인 cberl을 사용해서 ejabberd용 couchbase 모듈을 만들어보자.
준비  erlang/otp 17(or 17.5) ejabberd 15.04 couchbase server 4.x  cberl의 경우 빌드서버에는 libcouchbase2와 libcouchbase-dev가 설치되어 있어야 하며, 운영서버에는 libcouchbase2가 설치되어 있어야 한다.
 sudo wget -O/etc/yum.repos.d/couchbase.repo http://packages.couchbase.com/rpm/couchbase-centos62-x86_64.repo sudo yum check-update sudo yum install &amp;amp;#8211;enablerepo=epel libcouchbase2 libcouchbase-devel  cberl의 경우 ejabberd에 연동시 cberl_drv.</description>
    </item>
    
  </channel>
</rss>