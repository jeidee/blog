<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Posts &middot;  Erlang &amp; Go" />
  	<meta property="og:site_name" content="Erlang &amp; Go" />
  	<meta property="og:url" content="https://jeidee.github.io/posts/" />
    
    
    <meta property="og:type" content="website" />
    

  <title>
     Posts &middot;  Erlang &amp; Go
  </title>

    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://jeidee.github.ioimages/favicon.ico">
	  <link rel="apple-touch-icon" href="https://jeidee.github.ioimages/apple-touch-icon.png" />
    
    <link rel="stylesheet" type="text/css" href="https://jeidee.github.iocss/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://jeidee.github.ioindex.xml" rel="alternate" type="application/rss+xml" title="Erlang &amp; Go" />
      
      
        <link href="https://jeidee.github.io/posts/index.xml" rel="alternate" type="application/rss+xml" title="Posts &middot; Erlang &amp; Go" />
      
    
    <meta name="generator" content="Hugo 0.31.1" />

    <link rel="canonical" href="https://jeidee.github.io/posts/" />

    
<div id="particles-js"></div>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="https://jeidee.github.iojs/particles.js"></script>   
</head>
<body class="nav-closed">

  


 <div class="site-wrapper">




	<header class="main-header tag-head no-cover">

    <nav class="main-nav overlay clearfix">
      
      
        
          <a class="menu-button icon-feed" href="https://jeidee.github.io/posts/index.xml">&nbsp;&nbsp;Subscribe</a>
        
      
    </nav>
    <div class="vertical">

        <div class="main-header-content inner">
            <h1 class="page-title">

              <a class="btn-bootstrap-2" href="#content">Erlang &amp; Go</a>
          </h1>
        </div>
</div>
    <a class="scroll-down icon-arrow-left" href="#content"><span class="hidden">Scroll Down</span></a>
</header>

<main id="content" class="content" role="main">
    

	<div class="extra-pagination inner">
    <nav class="pagination" role="navigation">
	
	    <a class="newer-posts" href="/posts/">&larr; Newer Posts</a>
	
	<span class="page-number">Page 2 of 20</span>
	
	    <a class="older-posts" href="/posts/page/3/">Older Posts &rarr;</a>
	
</nav>

	</div>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/08/25/unity3dec9790ec849c-ios-osx-plugin-eab09cebb09c/">Unity3D에서 iOS &amp;#038; OSX Plugin 개발</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            

<p>다음과 같은 C++ 파일이 있다.</p>

<ul>
<li>hello.h</li>
</ul>

<pre><code class="language-cpp">  
#ifndef hello_hpp
  
#define hello_hpp

#include &lt;stdio.h&gt;

class hello {
  
public:
      
char* getMessage();
  
};

extern &quot;C&quot; {
      
hello* createHello();
      
void deleteHello(hello* obj);

char\* getMessage(hello\* hello);
  
}

#endif /\* hello_hpp \*/
  
</code></pre>

<ul>
<li>hello.cpp</li>
</ul>

<pre><code class="language-cpp">  
#include &quot;hello.h&quot;

char* hello::getMessage() {
      
return (char*)&quot;Hello, world&quot;;
  
}

hello* createHello() {
      
return new hello();
  
}

void deleteHello(hello* obj) {
      
if (obj == NULL) return;
      
delete obj;
  
}

char\* getMessage(hello\* obj) {
      
if (obj == NULL) return NULL;

return obj-&gt;getMessage();
  
}
  
</code></pre>

<p>Unity3D에서 C++로 작성된 hello 클래스를 사용하는 방법을 살펴보자.</p>

<h1 id="osx">OSX</h1>

<p>OSX의 경우 bundle library를 생성해서 Unity의 Assets/Plugins 디렉토리에 xxx.bundle 파일을 복사해 넣어야 한다.</p>

<p>XCode에서 New &gt; OS X&gt; Framework &amp; Library에서 Bundle 프로젝트를 생성한다.</p>

<p>프로젝트 이름은 hello로 입력한다.</p>

<p>hello.h/cpp 파일을 작성한 후 컴파일한다.</p>

<p>hello.bundle 파일이 생성되면 Unity3D의 Assets/Plugins 디렉토리에 hello.bundle을 복사해 넣는다.</p>

<p>Unity3D에서 C# 스크립트를 하나 작성한다.</p>

<ul>
<li>Hello.cs</li>
</ul>

<pre><code class="language-csharp">  
using UnityEngine;
  
using System.Collections;
  
using System.Runtime.InteropServices;
  
using System;

public class Hello : MonoBehaviour {
  
#if UNITY_IOS
      
[DllImport (&quot;__Internal&quot;)]
  
#else
      
[DllImport(&quot;hello&quot;)]
  
#endif
      
private static extern IntPtr createHello();

#if UNITY_IOS
      
[DllImport (&quot;__Internal&quot;)]
  
#else
      
[DllImport(&quot;hello&quot;)]
  
#endif
      
private static extern void deleteHello(IntPtr obj);

#if UNITY_IOS
      
[DllImport (&quot;__Internal&quot;)]
  
#else
      
[DllImport(&quot;hello&quot;)]
  
#endif
      
private static extern IntPtr getMessage(IntPtr obj);

// Use this for initialization
      
void Start () {
          
var obj = createHello();
          
message = Marshal.PtrToStringAnsi(getMessage(obj));
          
deleteHello(obj);
      
}

// Update is called once per frame
      
void Update () {

}

void OnGUI() {
          
GUI.Label(new Rect(10, 10, 100, 20), message);
      
}
  
}

</code></pre>

<p>Hello.cs의 경우 DllImport를 OS별로 달리 하도록 작성되었음을 확인한다.</p>

<p>Unity Editor에서는 hello.bundle을 import한다. (.bundle 확장자를 기입하지 않았음을 주의한다.)</p>

<h1 id="ios">iOS</h1>

<p>Hello.cs는 동일하며, hell.bundle 대신 Assets/Plugins/iOS 디렉토리에 hello.cpp와 hello.h 소스파일을 복사해 넣는다.</p>

<p>iOS 프로젝트를 빌드한 후 실행하면 정상 동작하는 것을 확인할 수 있다.</p>

<p>만약 3rd-party static library를 참조할 경우 해당 디바이스에 맞게(iOS) 빌드된 xxx.a 파일과 .h 파일들을 동일 디렉토리에 복사해 넣으면 된다.</p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/unity3d-plugin/">#unity3d plugin</a>,
            
        
        <time class="post-date" datetime="2016-08-25T00:00:00Z">
            25 Aug 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/08/25/unity3dec9790ec849c-plugin-importec8b9c-const-char-ebb380ed9998/">Unity3D에서 plugin import시 const char* 변환</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>다음 링크를 참고한다.</p>

<p><a href="http://answers.unity3d.com/questions/160230/returning-variables-in-a-plugin.html">http://answers.unity3d.com/questions/160230/returning-variables-in-a-plugin.html</a></p>

<p>내용을 간략하게 요약하면 다음과 같다.</p>

<p>C/C++의 const char* 데이터타입을 C#으로 변환할 때는,</p>

<p>IntPtr로 받아서 Marshal.PtrToStringAnsi(&#8230;)함수를 통해 string으로 변환할 수 있다.</p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/unity3d-plugin/">#unity3d plugin</a>,
            
        
        <time class="post-date" datetime="2016-08-25T00:00:00Z">
            25 Aug 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/07/20/centos-6-8ec9790ec849c-core-dump-ec84a4eca095/">CentOS 6.8에서 core dump 설정</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>다음 링크를 참고한다.</p>

<p><a href="https://www.centos.org/forums/viewtopic.php?t=43577">https://www.centos.org/forums/viewtopic.php?t=43577</a></p>

<p>core dump를 확인 하는 방법은 다음 링크를 참고한다.</p>

<p><a href="http://wyseburn.tistory.com/entry/%EB%A6%AC%EB%88%85%EC%8A%A4-core-dump-%ED%8C%8C%EC%9D%BC-%EC%98%A4%EB%A5%98-%ED%99%95%EC%9D%B8-%EB%B0%A9%EB%B2%95">http://wyseburn.tistory.com/entry/%EB%A6%AC%EB%88%85%EC%8A%A4-core-dump-%ED%8C%8C%EC%9D%BC-%EC%98%A4%EB%A5%98-%ED%99%95%EC%9D%B8-%EB%B0%A9%EB%B2%95</a></p>

<p>debuginfo-install 설치하는 방법은 다음과 같다.</p>

<p><a href="http://stackoverflow.com/questions/10389988/missing-separate-debuginfos-use-debuginfo-install-glibc-2-12-1-47-el6-2-9-i686">http://stackoverflow.com/questions/10389988/missing-separate-debuginfos-use-debuginfo-install-glibc-2-12-1-47-el6-2-9-i686</a></p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/core-dump/">#core dump</a>,
            
        
        <time class="post-date" datetime="2016-07-20T00:00:00Z">
            20 Jul 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/07/14/ios-placeholdereab8b0eb8aa5ec9d84-ed8faced95a8ed959c-uitextviewec9980-eb82b4ec9aa9ec9790-eb94b0eb9dbc-ec82acec9db4eca688eab080-eb8baceb9dbc/">iOS placeholder기능을 포함한 UITextView와 내용에 따라 사이즈가 달라지는 TableViewCell 만들기</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>UITextView는 UITextField에 있는 Placeholder 속성이 없다.</p>

<p>이 기능을 포함한 코드는 다음과 같다.</p>

<p><a href="https://gist.github.com/jeidee/f0c62cb6410fcfe09eb49eb76e5c894a">https://gist.github.com/jeidee/f0c62cb6410fcfe09eb49eb76e5c894a</a></p>

<p>UITableViewController를 사용해 입력 폼을 작성할 때,</p>

<p>TableViewCell에 UITextView를 추가할 경우 줄이 길어지면 해당 셀의 높이를 자동으로 조정하고 싶은 경우가 있다.</p>

<p>우선 UITextView를 TableViewCell의 ContentView를 기준으로 Auto Layout 설정을 했다고 가정한다.</p>

<p>TableViewController 클래스를 다음 코드를 참고해서 작성한다.</p>

<p><a href="https://gist.github.com/jeidee/5742d62e21fbc20c3fc6b2a5cc495a35">https://gist.github.com/jeidee/5742d62e21fbc20c3fc6b2a5cc495a35</a></p>

<p>UITextView의 속성 중에 Scrollable은 false로 되어 있어야 함을 주의한다.</p>

<p>주요 부분만 살펴보자면 다음과 같이 요약할 수 있다.</p>

<ul>
<li>TableViewController는 UITextViewWithPlaceholderDelegate를 구현</li>
<li>tableView(&#8230;, cellForRowAtIndexPath&#8230;)에서 UITextView의 참조와 extdelegate(UITableViewWithPlaceholder 클래스에서 설정한 프로토콜)를 self로 설정</li>
<li>textViewDidChange(&#8230;)가 콜백되면 테이블의 데이터를 reload하지 않고 다시 그림</li>
<li>tableView(&#8230;, heightForRowAtIndexPath&#8230;)에서 UITextView의 내용에 맞게 Cell의 높이를 재조정</li>
</ul>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        
        <time class="post-date" datetime="2016-07-14T00:00:00Z">
            14 Jul 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/07/11/ios-playgroundec9790-custom-framework-ec82acec9aa9ed9598eab8b0/">iOS playground에 custom framework 사용하기</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>반드시 다음 링크를 참고해서 작성해야 한다.</p>

<p>핵심은 Target을 Cocoa Touch Framework로 추가하고, Playground를 Project Navigator의 +버튼을 사용해서 추가해야 하는 것이다.</p>

<p><a href="http://stackoverflow.com/questions/33144877/playground-import-no-such-module-foo">http://stackoverflow.com/questions/33144877/playground-import-no-such-module-foo</a></p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/playground/">#playground</a>,
            
        
        <time class="post-date" datetime="2016-07-11T00:00:00Z">
            11 Jul 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/07/11/ios-uitableview-ec97acebb684ec9d98-ec8580-eab5acebb684ec84a0ec9d84-eca09ceab1b0-ed9598eb8a94-ebb0a9ebb295/">ios UITableView 여분의 셀 구분선을 제거 하는 방법</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>UITableView의 기본설정은 데이터가 없을 때에도 셀 구분선이 출력된다.</p>

<p>Footer View를 다음과 같이 지정해서 제거할 수 있다.</p>

<pre><code class="language-swift">  
tvList.tableFooterView = UIView()
  
</code></pre>

<p><a href="http://stackoverflow.com/questions/1369831/eliminate-extra-separators-below-uitableview">http://stackoverflow.com/questions/1369831/eliminate-extra-separators-below-uitableview</a></p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/uitableview/">#UITableView</a>,
            
        
        <time class="post-date" datetime="2016-07-11T00:00:00Z">
            11 Jul 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/07/05/react-native-remote-imageeab080-ecb69ceba0a5eb9098eca780-ec958aec9d84-eab2bdec9ab0/">react-native remote image가 출력되지 않을 경우</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            <p>ios에서 info.plist를 다음과 같이 수정한다.</p>

<pre><code>  
&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
  
&lt;dict&gt;
  
&lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
  
&lt;true/&gt;
  
&lt;/dict&gt;
  
</code></pre>

<p>다음 링크를 참고하도록 한다.</p>

<ul>
<li><a href="https://github.com/facebook/react-native/issues/1563#issuecomment-162721129">https://github.com/facebook/react-native/issues/1563#issuecomment-162721129</a></li>
<li><a href="https://github.com/facebook/react-native/issues/289">https://github.com/facebook/react-native/issues/289</a></li>
</ul>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        
        <time class="post-date" datetime="2016-07-05T00:00:00Z">
            5 Jul 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/06/28/tsungec9d84-ec82acec9aa9ed95b4-ejabberd-ed858cec8aa4ed8ab8ed9598eab8b0/">tsung을 사용해 ejabberd 테스트하기</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            

<h2 id="테스트-환경">테스트 환경</h2>

<ul>
<li>ejabber node 1대, tsung node 1대, dabase node 1대</li>
<li>ulimit -n 100000</li>
</ul>

<h2 id="tsung-xml">tsung.xml</h2>

<p><a href="https://gist.github.com/jeidee/ae4cb98e609f405d5ce6b60a4b53f0fe">https://gist.github.com/jeidee/ae4cb98e609f405d5ce6b60a4b53f0fe</a></p>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        
        <time class="post-date" datetime="2016-06-28T00:00:00Z">
            28 Jun 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/06/27/erlang-ebb2a4ecb998eba788ed82b9-ed88b4-tsung/">erlang 벤치마킹 툴 tsung</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            

<p><a href="http://tsung.erlang-projects.org/">Tsung</a>은 오픈소스 분산 테스팅 도구이다.</p>

<p>http, xmpp등을 테스트할 수 있으며 Client Agent와 서버 모니터링 도구를 제공하고, 결과는 다양한 그래프로 출력해 준다.</p>

<h2 id="설치">설치</h2>

<h3 id="centos-6">centos 6</h3>

<ul>
<li><a href="https://gist.github.com/aviafelix/f6a591ed8e4e3705661a">참고</a></li>
</ul>

<pre><code>  
yum -y install erlang perl gnuplot perl-Template-Toolkit

wget http://tsung.erlang-projects.org/dist/tsung-1.6.0.tar.gz

tar zxfv tsung-1.6.0.tar.gz
  
cd tsung-1.6.0
  
./configure &amp;#8211;prefix=/usr/local/ &amp;&amp; make &amp;&amp; make install

cp /usr/share/doc/tsung/examples/http_simple.xml /root/.tsung/tsung.xml
  
</code></pre>

<h3 id="ubuntu">ubuntu</h3>

<pre><code>  
sudo apt-get install erlang
  
sudo apt-get install tsung
  
</code></pre>

<h2 id="실행">실행</h2>

<h3 id="간단한-http-테스팅">간단한 http 테스팅</h3>

<p>위와 같이 설치하고 나면 다음 경로에서 예제 테스팅 템플릿 파일을 찾을 수 있다.</p>

<pre><code>  
/usr/local/share/doc/tsung/examples
  
</code></pre>

<p>http_simple.xml파일을 다음과 같이 복사한다.</p>

<pre><code>  
mkdir ~/.tsung
  
cp /usr/local/share/doc/tsung/examples/http_simple.xml ~/.tsung/tsung.xml
  
</code></pre>

<h4 id="tsung-xml-수정하기">tsung.xml 수정하기</h4>

<p>tsung.xml을 열어보면 다음과 같은 영역으로 구분되어 있다.</p>

<ul>
<li>tsung : 테스트 시나리오는 tsung 태그 안에 작성한다.</p></li>

<li><p>clients : tsung이 설치된 테스트 클라이언트 정보를 등록한다.</p></li>

<li><p>servers : 테스트 대상 서버 정보를 입력한다. 가중치를 입력해서 테스트 부하를 분산할 수 있다.</p></li>

<li><p>monitoring : CPU, Memory등의 OS 사용량을 모니터링하고자 하는 대상 서버 정보를 입력한다.</p></li>

<li><p>load : 테스트 유저의 생성 주기와 최대 유저수를 phase단위로 달리 설정할 수 있다.</p></li>

<li><p>options : 전역 변수를 설정한다.</p></li>

<li><p>sessions : 연결 세션별로 테스트 시나리오를 작성할 수 있다. 발생확률(probability)을 조정해서 시나리오 발생비율을 조정할 수 있다.</p></li>
</ul>

<p>좀 더 자세한 내용은 <a href="http://tsung.erlang-projects.org/user_manual/index.html">Tsung Document</a>를 참고한다.</p>

<p>http_simple.xml의 내용을 다음과 같이 수정해 보자.</p>

<blockquote>
<p><clients></p>

<p><client host="localhost" use\_controller\_vm="true"/></p>

<p></clients></p>
</blockquote>

<p>tsung 클라이언트 설정이다. 여러대의 클라이언트를 설정할 수 있다.</p>

<p>위의 예는 tsung이 실행되는 동일 host와 Erlang Runtime에서 클라이언트가 실행된다는 것을 의미한다.</p>

<p>remote client를 사용해 controller -&gt; worker 형태의 구성을 하고자 한다면,</p>

<p>다음 문서를 참고한다.</p>

<ul>
<li><a href="http://www.slideshare.net/ngocdaothanh/tsung-13985127">Easy distributed load test with Tsung</a></li>
<li><a href="http://tsung.erlang-projects.org/user_manual/faq.html#can-t-start-distributed-clients-timeout-error">Can&rsquo;t start distributed clients: timeout error</a></li>
</ul>

<p>위의 내용을 간단히 요약하면 다음과 같다.</p>

<ul>
<li><p>모든 client node에는 동일 버전의 erlang과 tsung이 설치되어 있어야 한다.</p></li>

<li><p>erl과 tsung은 path에 지정되어 있어야 한다.</p></li>

<li><p>모든 client node는 firewall이 해제되어 있어야 하고, ssh로 암호 없이 접속 가능해야 한다.</p></li>

<li><p>모든 client node는 host이름이 /etc/hosts에 정상적으로 등록되어 있어야 하며, 서로 해당 host명으로 접속할 수 있어야 한다.</p></li>
</ul>

<p>위의 조건은 아래 monitoring 대상 서버를 등록할 때에도 동일하게 적용된다.</p>

<blockquote>
<p><servers></p>

<p><server host="localhost" port="80" type="tcp"></server></p>

<p></servers></p>
</blockquote>

<p>웹서버가 로컬호스트에 있을 경우 위와 같이 작성하면 된다.</p>

<p>위 정보는 http request를 할 때 URL의 host 정보에 해당한다.</p>

<blockquote>
<p><monitoring></p>

<p><monitor host="foo" type="erlang"></monitor></p>

<p><monitor host="bar" type="erlang"></monitor></p>

<p></monitoring></p>
</blockquote>

<p>monitoring 항목에 monitor 대상 서버를 등록하면 대상 서버의 CPU와 Memory 사용량을 모니터링하게 된다.</p>

<p>monitoring 대상 서버에는 위 client 항목에서 명시된 조건이 충족되어야 함을 주의하도록 하자.</p>

<blockquote>
<p><load></p>

<p><arrivalphase phase="1" duration="10" unit="minute"></p>

<p><users interarrival="2" unit="second"></users></p>

<p></arrivalphase></p>

<p></load></p>
</blockquote>

<p>load 항목에는 테스트 부하를 설정한다.</p>

<p>arrivalphase는 순차적으로 실행되는 테스트 단계라고 보면 되며 duration 기간동안 session에 명시된 시나리오를 반복 수행하게 된다.</p>

<p>users 항목은 해당 phase동안 interarrival 간격으로 신규 user를 생성시키도록 설정한다.</p>

<p>즉, 위 설정은 10분 동안 매 2초 마다 한 명의 user를 생성해서 테스트를 수행하라는 의미이다.</p>

<blockquote>
<p><options></p>

<p><option type="ts\_http" name="user\_agent"></p>

<p><user\_agent probability="80">Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.8) Gecko/20050513 Galeon/1.3.21</user\_agent></p>

<p><user\_agent probability="20">Mozilla/5.0 (Windows; U; Windows NT 5.2; fr-FR; rv:1.7.8) Gecko/20050511 Firefox/1.0.4</user\_agent></p>

<p></option></p>

<p></options></p>
</blockquote>

<p>option 항목에는 http request할 때 임의로 정의할 user_agent를 설정한다.</p>

<p>probability의 합은 100이어야 하고, probability는 발생비율을 조정한다.</p>

<blockquote>
<p><sessions></p>

<p><session name="http-example" probability="100" type="ts_http"></p>

<p><request> <http url="/" method="GET" version="1.1"></http> </request></p>

<p><thinktime value="20" random="true"></thinktime></p>

<p></session></p>

<p></sessions></p>
</blockquote>

<p>sessions에는 테스트 시나리오를 작성한다.</p>

<p>session의 probability 값의 합은 100이어야 하고 발생비율을 조정한다.</p>

<p>request는 http 요청을 의미하며 url은 server항목에 지정된 host와 port를 사용해서 전체 url이 완성된다.</p>

<p>thinktime은 실행과 실행 사이에 간격을 의미하며 단위는 seconds이다.</p>

<p>하나의 시나리오는 한 명의 user가 해당 phase기간 동안 반복 수행하게 된다.</p>

<h3 id="실행-1">실행</h3>

<p>다음과 같이 실행 한다.</p>

<pre><code>  
tsung -f ~/.tsung/http_simple.xml start
  
</code></pre>

<h3 id="웹-gui">웹 GUI</h3>

<p>실행 되는 동안 웹브라우저에서 GUI를 통해 tsung의 동작 상태와 보고서(그래프 포함)를 확인할 수 있다.</p>

<p>기본포트는 8091이다.</p>

<p>tsung 컨트롤러가 실행 중인 host가 localhost일 경우, 다음 URL을 웹브라우저에서 탐색할 수 있다.</p>

<pre><code>  
http://localhost:8091
  
</code></pre>

<h2 id="보고서-생성">보고서 생성</h2>

<p>테스트가 완료되면 해당 로그 디렉토리로 이동해서 다음 스크립트를 실행한다.</p>

<pre><code>  
cd ~/.tsung/log/20160629-0202
  
/usr/local/lib/tsung/bin/tsung_stats.pl
  
</code></pre>

<p>tsung_stats.pl은 perl script파일이다. 경로는 시스템마다 조금씩 다를 수 있다.</p>

<p>해당 스크립트 실행 매개변수와 보고서의 상세항목에 대한 설명은 다음 문서를 참고하도록 한다.</p>

<ul>
<li><a href="http://tsung.erlang-projects.org/user_manual/reports.html">Statistics and Reports</a></li>
</ul>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        on
            
                <a href="https://jeidee.github.iotags/benchmark/">#benchmark</a>,
            
                <a href="https://jeidee.github.iotags/load-test/">#load test</a>,
            
        
        <time class="post-date" datetime="2016-06-27T00:00:00Z">
            27 Jun 2016
        </time>
    </footer>
</article>

	
	   
<article class="post posts">
    <header class="post-header">
        <h2 class="post-title"><a href="/2016/06/23/android-mked8c8cec9dbc-ec82acec9aa9ed95b4ec849c-c-ecbd98ec8694-ec9d91ec9aa9ed9484eba19ceab7b8eb9ea8-ebb98ceb939c-ed9b84-ed858cec8aa4ed8ab8/">Android.mk파일 사용해서 C&#43;&#43; 콘솔 응용프로그램 빌드 후 테스트</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
          <section class="post-content">
            

<h2 id="목표">목표</h2>

<p>ndk-build를 사용해 안드로이드 C++ 콘솔 응용프로그램을 빌드 후 디바이스에 배포해서 실행 테스트한다.</p>

<h2 id="디렉토리-구조">디렉토리 구조</h2>

<p>다음과 같은 구조를 갖도록 디렉토리와 빈 파일을 생성한다.</p>

<pre><code>  
ndktest (Dir)
  
&amp;#8212; jni (Dir)
     
&amp;#8212; Android.mk (File)
     
&amp;#8212; Application.mk (File)
     
&amp;#8212; hello.cpp (File)
  
</code></pre>

<h2 id="hello-cpp">hello.cpp</h2>

<pre><code>  
#include &lt;iostream&gt;

using namespace std;

int main() {
          
cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; endl;
          
return 0;
  
}
  
</code></pre>

<h2 id="application-mk">Application.mk</h2>

<p>stl을 사용하기 위해 다음과 같이 입력한다.</p>

<pre><code>  
APP\_STL := stlport\_static
  
</code></pre>

<h2 id="android-mk">Android.mk</h2>

<pre><code>  
LOCAL_PATH := $(call my-dir)
  
include $(CLEAR_VARS)

LOCAL_MODULE := helloworld

LOCAL_CFLAGS := -fPIE
  
LOCAL_CPPFLAGS := -fPIE
  
LOCAL_LDFLAGS := -fPIE -pie
  
LOCAL\_SRC\_FILES := \
          
hello.cpp

include $(BUILD_EXECUTABLE)
  
</code></pre>

<ul>
<li>LOCAL_PATH : $(call my-dir)은 현재 경로를 LOCAL_PATH에 저장한다.</li>
<li>include $(CLEAR_VARS) : LOCAL_PATH를 제외한 LOCAL_XXX 변수를 초기화한다.</li>
<li>LOCAL_MODULE : 출력물의 이름이다. 실행파일일 경우 실행파일명이며 라이브러리일 경우 라이브러리명이다.</li>
<li>LOCAL_CFLAGS : gcc의 c 파일 컴파일 옵션이다.</li>
<li>LOCAL_CPPFLAGS : gcc의 c++ 파일 컴파일 옵션이다.</li>
<li>LOCAL_LDFLAGS : gcc의 링커 옵션이다.</li>
<li>-fPIE는 Position Independent Executables 지원을 위한 옵션이다.</li>
<li>LOCAL_SRC_FILES : 소스파일 리스트이다. 기준경로는 LOCAL_PATH이다.</li>
<li>include $(BUILD_EXECUTABLE) : 출력물이 실행파일일 경우 BUILD_EXECUTABLE, 공유 라이브러리일 경우 BUILD_SHARED_LIBRARY, 정적 라이브러리일 경우 BUILD_STATIC_LIBRARY를 지정한다.</li>
</ul>

<h2 id="빌드">빌드</h2>

<p>ndktest 디렉토리에서 다음 명령을 실행한다.</p>

<p>ndk-build는 Android NDK를 다운로드 받아 설치한 경로를 PATH에 지정하여야 한다.</p>

<pre><code>  
$ ndk-build
  
</code></pre>

<h2 id="디바이스에서-실행">디바이스에서 실행</h2>

<p>adb는 Android SDK를 설치한 후 paltform-tools 경로를 PATH에 지정해야 사용할 수 있다.</p>

<pre><code>  
$ adb push libs/armeabi/helloworld /data/local/tmp
  
$ adb shell /data/local/tmp/helloworld
  
</code></pre>

<p>다음과 같은 에러가 발생 시 -fPIE옵션을 지정해서 다시 컴파일 하도록 한다.</p>

<pre><code>  
error: only position independent executables (PIE) are supported.
  
</code></pre>

          </section>
      </p>
      
    </section>
    <footer class="post-meta">
        
        
        
            
        
        
        <time class="post-date" datetime="2016-06-23T00:00:00Z">
            23 Jun 2016
        </time>
    </footer>
</article>

	

	<nav class="pagination" role="navigation">
	
	    <a class="newer-posts" href="/posts/">&larr; Newer Posts</a>
	
	<span class="page-number">Page 2 of 20</span>
	
	    <a class="older-posts" href="/posts/page/3/">Older Posts &rarr;</a>
	
</nav>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Erlang &amp; Go</a> </section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="https://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/syui/hugo-theme-air">hugo-theme-air</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://jeidee.github.iojs/jquery.js"></script>
    <script type="text/javascript" src="https://jeidee.github.iojs/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://jeidee.github.iojs/index.js"></script>

</body>
</html>

